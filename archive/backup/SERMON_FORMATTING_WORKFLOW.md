# 讲道稿格式化工作流 (Sermon Formatting Workflow)

## 目标
将讲道稿 Markdown 文件重构为标准格式，并用和合本圣经（CUV）替换经文引用。

## 理想的文件结构
1. **大纲** (Sermon Outline)
2. **英文原文** (English Transcript)
3. **中文原文** (Chinese Transcript)

## 步骤

### 第一阶段：结构优化
应用于任何讲道稿文件，改善可读性

#### 步骤 1: 添加清晰的章节标题
- 将长段落拆分成逻辑清晰的小节
- 为每个小节添加描述性标题（中英文）
- 使用 `##` 或 `###` 为小节分层

#### 步骤 2: 改善中文段落格式
- 将超过 200 字的单个段落拆分成 50-100 字的小段
- 在概念之间添加空行
- 使用列表（`-`）来组织相关要点

#### 步骤 3: 添加强调和视觉结构
- **加粗** (`**...**`) 关键概念
- 使用 blockquotes (`>`) 强调重要引用
- 使用水平分隔符 (`---`) 分隔主要部分

#### 步骤 4: 组织示例和对比
- 将示例标记为 "例子 1, 2, 3..."
- 对比项使用 `❌` 和 `✅` 符号
- 使用缩进和列表清晰化对比

### 第二阶段：经文替换（需要准确的和合本资源）

#### 步骤 1: 识别经文引用
在文件中搜索以下模式：
- 直接提及的经文（如 "马太福音 5:3"）
- 描述性经文内容（如 "去吧，我祝你安好"）
- 需要补充的引用位置

#### 步骤 2: 获取准确的和合本经文
**重要：项目已内置和合本圣经数据（CUNPS.json）**

快速获取经文的方式（自动化）：

```bash
python3 scripts/cuv_bible_query.py --book [书卷名] --chapter [章] --verse [节]
```

**示例：**

```bash
# 查询雅各书 2:5
python3 scripts/cuv_bible_query.py --book 雅各书 --chapter 2 --verse 5

# 查询以弗所书 4:28
python3 scripts/cuv_bible_query.py --book 以弗所书 --chapter 4 --verse 28

# 查询马太福音 5:3
python3 scripts/cuv_bible_query.py --book 马太福音 --chapter 5 --verse 3

# 查询整章（如路加福音第8章）
python3 scripts/cuv_bible_query.py --book 路加福音 --chapter 8
```

支持的书卷名称（完整列表见脚本中的 BOOK_NUM_TO_NAME）：
- 旧约：创世记、出埃及记、利未记...
- 新约：马太福音、马可福音、路加福音、约翰福音、使徒行传...
- 书信：罗马书、哥林多前书、哥林多后书、加拉太书、以弗所书、腓立比书、歌罗西书、帖撒罗尼迦前书、帖撒罗尼迦后书、提摩太前书、提摩太后书、提多书、腓利门书、希伯来书、雅各书、彼得前书、彼得后书、约翰一书、约翰二书、约翰三书、犹大书
- 启示录

#### 步骤 3: 替换经文内容
对每处经文引用：
```markdown
**[书卷 章:节]（和合本）：**

> "[准确的和合本经文内容]"
```

**示例格式：**
```markdown
**以弗所书 4:28（和合本）：**

> "偷窃的人不要再偷，总要劳力，亲手做益处的事，叫有缺乏的人有分受。"
```

#### 步骤 3.5: 快速获取多个经文（批量方式）

如果需要一次性获取多个经文，可以创建一个简单的脚本：

```bash
#!/bin/bash
# 查询多个经文的脚本

python3 scripts/cuv_bible_query.py --book 以弗所书 --chapter 4 --verse 28
python3 scripts/cuv_bible_query.py --book 马太福音 --chapter 5 --verse 3
python3 scripts/cuv_bible_query.py --book 马太福音 --chapter 18 --verse 33
python3 scripts/cuv_bible_query.py --book 雅各书 --chapter 1 --verse 27
```

#### 步骤 4: 验证准确性
- 脚本直接从 CUNPS.json 获取数据，准确性有保障
- 如果需要验证，对比原始数据源或官方和合本圣经
- 仅需关注 `text` 字段的内容（脚本会自动过滤 HTML 标签）
### 第三阶段：Git 提交

```bash
# 1. 查看修改
git status
git diff [filename]

# 2. 添加文件
git add [filename]

# 3. 提交
git commit -m "chore: restructure [filename] with improved formatting and Scripture references"

# 4. 推送
git push origin main
```

## 文件处理顺序

建议按文件大小从小到大处理，先完成小文件作为模板：

1. **最小文件** - 作为初步模板
2. **中等文件** - 验证流程有效性
3. **大文件** - 应用经过验证的格式

## 常见改进模式

### 中文长段落处理示例
**改前：**
```
这个段落有三个关键点，首先讲述了问题的由来，其次分析了问题的根源，最后给出了解决方案，这样的组织方式可以帮助读者更好地理解内容。
```

**改后：**
```
这个段落有三个关键点：

1. **问题的由来** - 讲述了事件的背景
2. **根源分析** - 深入分析了问题的来源
3. **解决方案** - 给出了实际的解决建议

这样的组织方式可以帮助读者更好地理解内容。
```

### 经文引用改进示例

**改前（仅提及）：**
```
马太福音 5:3 说虚心的人有福了，因为天国是他们的
```

**改后（添加完整经文）：**
```
**马太福音 5:3（和合本）：**

> "虚心的人有福了！因为天国是他们的。"

这表明...
```

**获取准确经文的方法：**
```bash
python3 scripts/cuv_bible_query.py --book 马太福音 --chapter 5 --verse 3
# 输出：
# 马太福音 5:3
# 虚心的人有福了！因为天国是他们的。
```

## 注意事项

⚠️ **重要：**
- 总是验证和合本版本的准确性
- 保留原始英文内容
- 不要删除任何原始内容，只是改变格式
- 每次提交前检查 git diff

## 相关文件

- 已完成模板：`Rich_in_Faith.md`
- 待处理文件列表：见项目根目录

---

**Last Updated:** 2026-02-07
